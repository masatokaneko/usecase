# DL-8 国際共同治験・RWD統合

## 概要

製薬企業や研究機関が国際共同治験やリアルワールドデータ(RWD)の統合解析を行う際、各国の規制遵守とデータ完全性の保証が重要となる。本ユースケースでは、ScalarDLを利用して治験データや医療データの正当性を証明しながらアクセス制御を実現する。国際共同治験 × RWD統合領域では、EHR・EDC・RWD・AI解析の間でデータの真正性・透明性・再現性が完全に断絶しているという構造的な問題があり、ScalarDLによる改ざん不能な証跡レイヤーを構築することで解決する。

## 現状の課題（構造的な問題）

国際共同治験 × RWD統合領域は、以下の **5つの本質的課題** により、品質・透明性・申請スピードに深刻な影響が出ている。

### ① データ源（EHR/EDC/RWD）が国・組織ごとに分断され、真正性を保証できない

- EHR → EDC入力が手作業で、どこで誤り・改ざんが生じたか不明
- 国ごとの標準（FHIR/HL7/レセプト/SS-MIX/OMOP）が異なり、統一管理が不可能
- 中間マートで加工が入り、「元データとの突合」が困難

👉 **規制当局が最も問題視しているポイント**

### ② ALCOA+（GCPのデータインテグリティ要件）の"Original/Accurate/Complete"が担保できない

- 元データがどれか明確に示せない
- 修正履歴はEDCにあるが第三者検証不可能
- GxP対応の証跡が不十分で、査察時に説明責任が果たせない

### ③ RWDの匿名化・標準化・クリーニングプロセスがブラックボックス

- ベンダー依存（IQVIA/Optum/Veradigm）
- 匿名化の方式や変換ロジックを外部に説明できない
- 被験者マッチングの透明性を担保できない

👉 **RWE活用を阻害する最大要因**

### ④ AI/MLでのデータ加工・解析の透明性が極端に低い

- どのデータを使ってモデルが作られたか不明
- Python/SASスクリプトが属人化
- 外部対照（External Control Arm）生成時の説明責任が果たせない

### ⑤ 国際共同治験特有の"クロス国境監査負荷"が巨大

- 米国・欧州・日本・アジアで証跡がバラバラ
- データロック〜申請までの整合チェックが爆発的コスト
- 再解析リスクが高い（結果、承認遅延）

## ソリューション（ScalarDL + 分散エビデンス収集アーキテクチャ）

ソリューションは、単なる「改ざん防止」ではなく、**治験/RWD統合プロセス全体を貫く"証跡レイヤー"を作る**。分散エビデンス収集アーキテクチャにより、既存システムを変更せずに透明性を底上げする。

### ソリューション全体構造（3レイヤー）

#### レイヤー①：業務プロセス（治験/RWDの実務）

- プロトコル確定〜IRB承認
- 被験者登録・IC
- EDC入力・クエリ対応
- RWD取得・匿名化・標準化
- 統合データセット構築
- 解析・CSR作成・当局提出

👉 **この業務ステップごとに「クリティカルイベント」を特定し、証跡管理の対象にする。**

#### レイヤー②：システム構造（分散エビデンス収集アーキテクチャ）

各システム（EHR/EDC/CTMS/RWD ETL/解析環境）に **小さな ECA（Evidence Collection Agent：証拠収集エージェント）** を配置し、ScalarDLにイベントを送信する。

送信内容は：
- **ハッシュ**（元データ or スナップショット）
- **メタデータ**（誰が・いつ・何を・どのシステムで）
- **バージョン関係のリンク**
- **処理パラメータ**（匿名化/標準化スクリプトの情報など）

👉 これにより、既存システムは変更されずに "透明性" だけを底上げできる。

#### レイヤー③：ScalarDL（改ざん不能な唯一の証跡レイヤー）

役割：
- **国・組織を超えた証跡の統一管理**
- **イベントチェーン管理（Contract）**
- **第三者検証可能な改ざん防止**
- **規制対応（GCP/GxP/CSV）に耐える透明性**

👉 ブロックチェーンのような改ざん防止と、従来DBの運用性を両立。

### システム構成

```text
          ┌─────────────────────────────────┐
          │        既存業務システム群          │
          │                                   │
          │  [Site EHR]   [EDC]   [CTMS]      │
          │      │          │        │        │
          │  [RWD DWH/ETL] [解析環境] [DMS]    │
          └───┬──────┬──────┬──────┬─────────┘
              │      │      │      │
      ┌───────▼──────▼──────▼──────▼──────────┐
      │   ECA群（Evidence Collection Agents） │
      │  - EHR-ECA / EDC-ECA / RWD-ECA /      │
      │    Analytics-ECA / DMS-ECA / ...      │
      └───────┬──────────────────────────────┘
              │  (gRPC/REST)
      ┌───────▼──────────────────────────────┐
      │           ScalarDL クラスタ          │
      │  - DL Gateway                        │
      │  - Contract Executor                 │
      │  - Ledger Storage                    │
      └───────┬──────────────────────────────┘
              │
       ┌──────▼─────────────────────────────┐
       │ Evidence Portal / Viewer            │
       │  - 監査/QA向け検索・可視化            │
       │  - ハッシュ照合                     │
       │  - 国・組織横断ワークフロー画面       │
       └───────────────────────────────────┘
```

### 主要コンポーネント

#### 既存業務システム群

- **Site EHR**: 患者診療情報・インフォームドコンセント(IC)などのソースデータ
- **EDC**: eCRF入力、クエリ発行／回答、データロック
- **CTMS**: 試験計画・サイト管理・訪問・支払等
- **RWD DWH/ETL**: Claims/EHR/PHR 等のRWDを受領・匿名化・標準化する層
- **解析環境（SAS / R / Python等）**: 外部対照群構築や統計解析、AI/ML処理
- **DMS**: Protocol、SAP、CSR、IRB承認書などの文書管理

> ここには基本「大きな改修を入れない」。その代わり、隣に **ECA** を置いて証跡だけ横取りしてScalarDLに送る。

#### ECA（Evidence Collection Agent）

各システムに寄り添う小さなサービス／バッチ。共通の責務は以下：

1. **トリガー検知**: DBのCDC（Change Data Capture）、アプリのWebhook／イベント、ETLジョブの前後フック、ファイル着信の監視
2. **証拠データの抽出・正規化**: 対象レコード／ファイルから検証に必要な情報だけを抽出
3. **ハッシュ値の生成**: SHA-256でペイロードのハッシュを計算
4. **メタデータの付与**: `trial_id`, `subject_id`, `entity_type`, `operation_type`, `source_system`, `actor`, `timestamp`, `country`, `site_id` など
5. **ScalarDL へのイベント送信**: DL Gateway に対し、特定の Contract を指定して送信

代表的な ECA の例：
- **EHR-ECA**: EHRの診療記録／IC取得ログをフックし、治験関連エンティティのペイロード＋ハッシュをScalarDLに送る
- **EDC-ECA**: eCRF保存、クエリ解決、データロックなどEDCイベントをWebhook経由で受け取り、対象CRFスナップショットのハッシュ＋メタを送る
- **RWD-ECA**: RWD受領・匿名化・標準化・抽出ジョブの前後で呼び出され、原データ、処理パラメータ、結果データセットのハッシュをScalarDLに送る
- **Analytics-ECA**: 解析ジョブ実行時に使用データセット、解析コード、モデルバージョンなどをまとめてハッシュ＋メタで送る
- **DMS-ECA**: Protocol/SAP/CSR/IRB承認文書が「最終版」となった瞬間に、文書ファイルのハッシュをScalarDLに登録

#### ScalarDL クラスタ

- **DL Gateway**: ECAからのイベント受付API、認証・認可・レート制御など
- **Contract Executor**: 受け取ったイベントをどの Contract に渡すか判定、業務ルールに従った状態遷移・整合性チェック
- **Ledger Storage**: イベントとハッシュチェーンを永続化、改ざん検知用の内部構造

#### Evidence Portal / Viewer（新規アプリ）

- 治験ID／被験者ID／RWDベンダー／国などで証跡検索
- イベントチェーンをタイムライン表示（Protocol承認→IC取得→CRF入力→データロック→RWD統合→解析→申請）
- ハッシュ照合（EDCやDMSから取得した現物とScalarDLの記録が一致するか検証）
- RWD利用申請など、国・組織横断の承認フロー画面
- 監査・QA・規制当局向けの「見せる顔」

#### Contract（ワークフロー自動化）

- **TrialLifecycleContract**: Protocol最終版 → IRB承認 → Site開設 → First Patient In → Data Lock → CSR → Submission の順序・整合性チェック
- **SubjectEnrollmentContract**: IC署名イベントがなければ Enrollment を拒否、DataLock後のCRF更新イベントを拒否
- **RWDUsageContract**: データ保護担当／法務／統計責任者の承認イベントが揃った場合のみRWD抽出イベントを受理

ワークフロー画面 = Contractへのイベント送信UI

### データフロー例

#### 被験者登録〜データロック

1. 病院EHRで診療記録・IC取得記録が作成 → EHR-ECAが `EHRRecordCreated`, `InformedConsentSigned` イベントをScalarDLへ送る
2. CRCがEDCにeCRF入力 → EDC-ECAが `CRFVersionCreated` イベント
3. CRA/CROがクエリ修正 → `CRFUpdated` イベント（修正前後の関係をメタで保持）
4. データロック → `SubjectDataLocked` / `TrialDataLocked` イベント

**結果**: EHR〜EDC〜修正〜ロックまでのチェーンが ScalarDL 上で一意に再現できる。

#### RWD受領〜統合データセット

1. RWDベンダーから原データ受領 → RWD-ECAが `RawRWDReceived`（原データハッシュ）
2. 匿名化・標準化 → `RWDPseudonymized`, `RWDStandardized`（処理バージョン＋パラメータ＋結果ハッシュ）
3. 治験用RWD抽出 → `RWDForTrialExtracted`（試験ID＋抽出条件＋結果ハッシュ）
4. RCTデータとの統合・解析 → Analytics-ECA が `IntegratedDatasetCreated`, `AnalysisRun` などをScalarDLに記録

これにより、「この解析結果は、どの原データから、どの処理・匿名化・標準化・抽出を経て得られたか」を後から完全に説明できるようになる。

## 競合との提供価値の違い

**結論**: **"EDC/RWD/AI/解析" という縦割りの壁を横断して、『全工程の透明性＋改ざん防止』を提供できるのは ScalarDL しかない。**

### 競合A：EDC/CTMS（Medidata, Veeva, Oracle）

**できる**: EDC内のログ管理、クエリ管理、SDTM変換の一部支援

**できない（ScalarDLができる）**:
- EHR→EDCの源流証跡
- RWD加工の全工程の不可逆ログ
- 国際共同治験の証跡統合
- 解析環境/SASコードの透明性
- 第三者検証可能な"外部ログ"

### 競合B：RWDベンダー（IQVIA/Optum/Veradigm）

**できる**: 大規模RWD提供、匿名化・標準化

**できない（ScalarDLができる）**:
- 匿名化ロジックの改ざん防止
- 出所証明（Provenance）
- "どのRWDが治験で使われたか"の公開検証
- EDC×RWDの統合証跡
- AI解析結果の透明性確保

### 競合C：ライフサイエンス向けブロックチェーン（IBM Clinical Trial Ledger等）

**できる**: 治験データの改ざん防止

**できない（ScalarDLができる）**:
- 実用スケール（性能/運用性）
- EDC/EHR/RWD/AIすべての統合
- 商用導入（実証止まり）
- 組織横断のContract管理

### 競合D：監査/ログ管理（AuditTrail製品）

**できる**: 各システム内のログ収集

**できない（ScalarDLができる）**:
- システム横断証跡
- 改ざん防止の真正ログ
- GxP/GCPレベルの整合性チェーン

### まとめ：ScalarDLの競合優位

**完全横断型（EHR→EDC→RWD→解析→申請）で改ざん不能・第三者検証可能な"唯一の証跡レイヤー"を提供できること。**

## 導入目的・効果

### (1) 申請リードタイムの大幅短縮（数週間〜数ヶ月）

- データロック〜申請までの整合チェックを自動化
- QA・査察対応コストの大幅削減
- 再解析・バグリカバリーのリスクを減らす

### (2) ALCOA+準拠のデータインテグリティ強化

- 元データ（Source）→ 最終提出データまでを完全追跡
- 改ざん検知・バージョンチェーンが保持
- 監査時に説明可能（Explainable Data Flow）

### (3) RWD活用の信頼性向上（RWE承認に直結）

- RWDの加工履歴が透明化
- 外部対照（External Control Arm）の妥当性が証明しやすい
- RWDベンダー依存が減る

### (4) AI解析の説明責任（AI Act・FDA/EMAガイドライン対応）

- 解析に使用したデータセット
- モデルバージョン
- 特徴量生成
- 推論ログ

→ これらを全てScalarDLで証跡化し、AI活用の透明性を担保。

### (5) 国際共同治験のオペレーション効率化

- 各国の証跡がScalarDL上に統合
- CROやデータサイエンスチームの再作業が激減
- 社内外ステークホルダーの品質標準を統一できる

## 導入メリット・ROI

### 生産性向上

データロック〜申請までの整合チェックが自動化され、査察対応時間が大幅に短縮される。

### 品質向上とリスク低減

ALCOA+要件を完全に満たし、改ざん検知・バージョンチェーン管理により、査察時の説明責任を果たせる。

### 投資対効果の可視化

段階導入によりPoC段階から開発速度やコスト削減率を測定でき、経営層が投資判断をしやすい。

### コンプライアンス強化

GCP/GxPレベルの整合性チェーンを実現し、各国規制当局への信頼を獲得できる。

## 類似事例・参考資料

- 製薬会社が国際共同治験でScalarDLを用いて治験データの真正性を担保し、規制当局の承認プロセスを効率化した例がある。
- RWD活用において、匿名化・標準化プロセスの透明性をScalarDLで担保し、RWE承認を加速した事例がある。

## まとめ

国際共同治験 × RWD統合では、EHR・EDC・RWD・AI解析の間で**データの真正性・透明性・再現性が完全に断絶**している。各システムからハッシュ＋メタデータを送る**分散エビデンス収集アーキテクチャ（ECA群）＋ ScalarDL（改ざん防止レイヤー）＋ Evidence Viewer**で全工程の証跡を統一管理することで、申請リードタイムを短縮し、RWE活用の信頼性を向上させ、GxP/GCPの完全準拠を実現できる。EDC/RWD/監査ツールは部分最適、ブロックチェーンは実用性不足である中、**ScalarDLだけが治験/RWD/AI/国際共同治験を横断して改ざん防止を提供できる**。
