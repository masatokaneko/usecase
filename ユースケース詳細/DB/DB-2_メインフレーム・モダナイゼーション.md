# DB-2 メインフレーム・モダナイゼーション

## 概要

金融機関や保険会社などでは、COBOLと階層型DBを基盤としたメインフレームシステムが基幹業務を支えている。しかし保守コストの増大と技術者の高齢化に伴い、クラウドへの移行や新規サービス開発が急務となっている。このユースケースでは、段階的にメインフレームからクラウドDBへ移行しつつも、旧・新システム間のデータ整合性を保証する仕組みを提供する。

## ビジネス課題

- 旧システムの保守コストが高く、若手技術者が育たず将来性がない。
- 新商品やデジタルサービスを迅速に展開したいが、レガシーアーキテクチャがボトルネック。
- ビッグバン移行には莫大なコストとリスクが伴い、失敗した場合の業務影響が大きい。

## システム課題

- メインフレームとクラウドDB間でデータを二重管理する期間が生じ、データ整合性が崩れやすい。
- メインフレームではトランザクションやデータモデルが特殊であり、既存アプリケーションを大きく書き換えずに移行するのが困難。
- 新旧データベース間の同期はバッチ処理で行われており、リアルタイム性に乏しい。

## 対象データ・環境

- メインフレームの階層型DB（IMSなど）で管理される顧客情報や契約情報。
- 新規クラウドDB（RDBやNoSQL）で管理する顧客向けデジタルサービスのデータ。
- コアシステムと周辺チャネルアプリケーションが混在するハイブリッド環境。

## 導入目的・効果

- メインフレームの機能を段階的にクラウドへ移行し、将来の運用コストを削減。
- 新規開発するデジタルチャネルや分析基盤と既存基幹データをリアルタイムで連携し、顧客価値を向上。
- ベンダーロックインを解消して、将来のクラウドやDB選択の自由度を高める。

## 解決方法（ソリューション概要）

ScalarDBをメインフレームDBとクラウドDBの間のトランザクション管理層として配置し、旧DBと新DBをまたぐ分散トランザクションを実現する。アプリケーションはScalarDB経由で一貫性を確保しつつデータを読み書きできるため、新旧システム共存期間でもデータの整合性を保てる。また、ベンダーに依存しないAPIにより将来的なDB移行の柔軟性を確保する。

## システム構成

- メインフレーム側にトランザクションゲートウェイを設置し、クラウド側のDBとScalarDBに接続。
- アプリケーションはScalarDBのクライアントライブラリを介してトランザクションを発行し、旧DBと新DBを同時に更新。
- データ移行フェーズ終了後は、新DBのみへの接続に切り替えるが、同じAPIを利用できるためアプリの修正が少ない。

## 導入メリット／ROI

- メインフレーム刷新におけるビッグバン移行のリスクを回避し、段階的移行を可能にする。
- アプリケーション改修コストを大幅に削減しつつ、最新のクラウドサービスやAI基盤を活用できる。
- 将来的なDB変更やクラウド移行に柔軟に対応でき、ベンダーロックインから脱却できる。

## 類似事例・参考資料

- 金融業界では、メインフレームからクラウドへの段階的移行を進める際にScalarDBを採用し、数十億レコードを扱うシステムの整合性を保ちながら段階的移行を実現したケースがある。
- ScalarDBの公式サイトでは、レガシーシステムのモダナイゼーションとマイクロサービス統合を支援することが強調されている（参考: [scalar-labs.com](https://scalar-labs.com)）。

