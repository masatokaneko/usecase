# DB-8 データベース移行・ベンダーロックイン解消

## 概要

既存アプリケーションが特定のDB製品に依存していると、ライセンス費用やサポート終了、性能不足などの理由で他のDBへ移行したい場合に大きな障壁となる。このユースケースでは、アプリケーションを大きく変更せずにDBを切り替えられるようにすることで、ベンダーロックインを解消する。

## ビジネス課題

- 現行DBのライセンス更新やバージョンアップに伴うコスト増大。
- 支援終了や性能限界により、他のDBへの移行を検討したいが既存アプリの依存度が高く移行が難しい。
- マルチクラウド戦略やクラウド移行に合わせてDBを変えたいが、アプリケーションの再開発コストを抑えたい。

## システム課題

- ORMやDB固有のSQLを多用しており、別製品への移行が困難。
- 移行期間中に旧DBと新DBのデータ整合性を保持する仕組みが必要。
- 既存データを新DBに移行する際の停止時間を最小化する必要がある。

## 対象データ・環境

- 既存の商用RDBMSと、新たに採用したいオープンソースDBやクラウドネイティブDB。
- アプリケーションが単一のDBに強く結び付いている環境。

## 導入目的・効果

- アプリケーションの変更を最小限に抑えてDB移行を実現し、ライセンス費用と運用コストを削減。
- データ移行のダウンタイムを抑え、業務への影響を最小限にする。
- 将来的にDBやクラウドを柔軟に選択できるようにする。

## 解決方法（ソリューション概要）

ScalarDBをアプリケーションとDBの間に配置し、アプリはScalarDBのAPIに依存するようにする。移行先DBを追加して両方のDBに対して分散トランザクションを実施し、移行期間中は旧DBと新DBが同期される。移行完了後は旧DBの接続を切り替えるだけで済み、アプリケーション側の変更は不要。これによりベンダーロックインを解消し、将来のDB選択の自由度を確保する。

## システム構成

- 既存DBと移行先DBの双方に接続されたScalarDBインスタンス。
- アプリケーションがScalarDBの共通APIを使用してデータ操作を行う。
- データ移行フェーズでは、一度の操作で旧DBと新DBを同時に更新し、整合性を保つ。

## 導入メリット／ROI

- DBライセンス費用や運用費用を削減し、TCOを改善。
- 移行期間中の業務停止時間を最小限に抑え、リスクを低減。
- アプリケーションの将来的なDB／クラウド選択を柔軟にし、IT投資を最適化。

## 類似事例・参考資料

- 製造業や小売業が、商用DBからオープンソースDBへ移行する際にScalarDBを用いて段階的な移行を成功させた事例がある。
- ScalarDBの公式ドキュメントでは、DB移行の際にアプリケーション修正を最小化できることが紹介されている（参考: [scalardb.scalar-labs.com](https://scalardb.scalar-labs.com)）。

