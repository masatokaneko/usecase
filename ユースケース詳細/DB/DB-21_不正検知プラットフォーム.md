# DB-21 不正検知プラットフォーム

## 概要

金融取引やオンラインバンキングでは、サイバー攻撃や不正取引の検知が重要である。従来はログをデータウェアハウスに蓄積してオフラインで分析していたが、不正行為はリアルタイムに検知しなければ防止できない。本ユースケースでは、多種多様なログデータを集約し、機械学習モデルをインメモリで適用する不正検知プラットフォームを構築する。

## ビジネス課題

- 過去データのバッチ分析では、不正トランザクションをリアルタイムに検出できず損失が拡大する。
- ログデータの増大に伴い、保管コストやETLコストが増大している。
- 法規制や内部統制により、不正検知モデルの説明責任と監査証跡が求められる。

## システム課題

- ログは基幹DB、アプリケーションサーバー、ウェブアクセスログなど多様な場所に保存されており、データスキーマや形式が統一されていない。
- 機械学習モデルの学習には大規模データをインメモリで処理する必要があり、データの取り込み効率が課題。
- モデルを本番環境へ適用する際、トランザクションとリアルタイムデータへのアクセスを両立させる仕組みが必要。

## 対象データ・環境

- 顧客プロファイル、ログイン履歴、トランザクションログ、ウェブアクセスログなど。
- NoSQLデータベース（低頻度アクセスのログ）、RDBMS（トランザクション）、Spark等のインメモリ分析基盤。

## 導入目的・効果

- 各トランザクションに対してリアルタイムに不正リスクを判定し、損失を未然に防ぐ。
- ログの分散保存と重複ETLを排除し、低コストで大規模データを扱えるようにする。
- 不正検知モデルの学習と適用を迅速に回し、精度向上と継続的な改善を実現する。

## 解決方法（ソリューション概要）

ScalarDBをデータアクセスレイヤーとして配置し、トランザクションログや顧客プロファイル、ウェブアクセスログなどを仮想的に統合する。Sparkなどのインメモリ分析エンジンを用いてScalarDBからデータをロードし、機械学習モデルを訓練。モデル適用時にはScalarDB Analytics機能を用いて分散データに対する推論を実行し、その結果をリアルタイムにシステムへ反映する。低頻度アクセスの古いログはクラウドNoSQLに保存し、最近のデータはローカルに保持するハイブリッド構成とする。

## システム構成

- **データ集約レイヤー**：各種ログ生成システムからのデータをScalarDB経由で取得し、ETLなしで仮想統合する。アクセス頻度の低いログはクラウドNoSQLに保存し、アクセス頻度の高いログはオンプレミスまたはインメモリに保持する。
- **分析レイヤー**：SparkクラスターやフレームワークがScalarDBからデータをバッチ/ストリームでロードし、特徴量生成とモデル学習を行う。モデルはMLOpsパイプラインにより継続的に更新される。
- **実行レイヤー**：トランザクションシステムがScalarDBを通じてモデル推論を呼び出し、取引ごとに不正スコアを判定。高リスクのトランザクションには追加認証やブロック処理を行う。

## 導入メリット／ROI

- リアルタイムな不正検知により、詐欺被害を大幅に削減し、顧客の信頼を高める。
- ETLやデータ重複を排除し、ログ保管コストを抑制。
- 機械学習モデルの学習とデプロイを高速化し、不正検知精度の継続的改善を実現。

## 類似事例・参考資料

- 銀行や決済事業者がログ分析基盤とモデル適用にScalarDBを採用し、分散ログに対するリアルタイム不正検知を実現した例がある。SparkとScalarDBの連携により、分散データのインメモリ分析とモデル推論が効率的に行われている。

