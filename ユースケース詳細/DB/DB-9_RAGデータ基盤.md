# DB-9 RAGデータ基盤

## 概要

自動車や電子部品など高度な製品を開発・製造する企業では、設計図、試験レポート、顧客対応のFAQ、品質基準書など膨大な非構造データが部門や拠点ごとに蓄積されている。技術者や営業担当が必要な知見を迅速に検索できないため、設計のやり直しや顧客対応の遅延が発生し、研究開発投資に対する回収（ROI）が低下している。このユースケースでは、生成AIとベクトル検索を組み合わせたRetrieval‑Augmented Generation (RAG) 基盤を構築し、社内のノウハウ資産を即座に活用できる環境を整備する。

## ビジネス課題

- 製品開発部門・営業部門・カスタマーサービス部門などがそれぞれ独自のファイルサーバーやデータベースに情報を保存しており、技術者や新人が必要な知識に辿り着くまで時間がかかる。検索効率の低さが生産性とROE向上の妨げとなっている。
- 車両システム化や電子事業への参入に伴い、システムインテグレーション能力や機能安全・サイバーセキュリティの知識が求められるが、社内に点在する技術資料から適切な情報を抽出できない。
- グローバル拠点間で標準プロセスやベストプラクティスを共有できず、ノウハウ継承や新人教育に時間がかかる。また、退職者の暗黙知が失われやすい。

## システム課題

- 技術資料はPDFやCADファイルなどさまざまな形式で管理され、ファイルストレージ、RDBMS、SaaSストレージが混在している。メタデータの付与やアクセス制御が部門によって異なるため、統一的な検索が難しい。
- ベクトルストアと既存DBの更新処理が別々に実装されており、文書を更新した際にインデックスが即時に反映されない。これにより検索結果に古い情報が混在する。
- 機密文書や取引先情報を含むデータをLLMが参照する場合、ユーザーごとの閲覧権限を遵守した結果を返さなければならないが、既存システムではアクセス制御を連動させる仕組みがない。

## 対象データ・環境

- 設計図、試験レポート、品質規格、特許文書、サポートFAQなどの非構造ドキュメント。
- 社内ファイルサーバー、SharePoint、ドキュメントDB、RDBMSなど複数のデータストレージ。
- ベクトルストア（Faiss、Milvus等）および検索エンジンと連携する環境。

## 導入目的・効果

- 技術者や営業担当が質問に対してAIが即座に適切な回答を提示し、設計や顧客対応にかかる時間を短縮する。
- 非構造データから得られる知見を活用し、新製品開発や市場投入の速度を向上させる。また、引退・退職による知識断絶を防止する。
- 多拠点間で標準プロセスを共有し、部門横断的なノウハウ活用と教育を実現する。

## 解決方法（ソリューション概要）

ScalarDBをデータアクセスゲートウェイとして利用し、既存のRDBMSやドキュメントDB、ファイルストレージとベクトルストアを仮想的に統合する。ドキュメントが登録・更新された際、ETL処理を通じて文書内容を自動抽出し、埋め込みモデルでベクトル化した上でScalarDBの分散トランザクションによってベクトルストアへ一括登録する。さらにScalarDBのABAC機能を用いて文書とユーザーに属性タグを付与し、検索時にユーザー属性に応じたフィルタリングを行う（参考: [scalardb.scalar-labs.com](https://scalardb.scalar-labs.com)）。LLMからの検索要求はScalarDBのAPIまたはMCPサーバー経由で実行し、分散トランザクションにより最新情報とアクセス制御を両立させる。

## システム構成

- **データインジェストレイヤー**：社内ストレージやPLMシステムから文書を収集し、メタデータ抽出・ベクトル化・タグ付けを行うETLパイプライン。文書登録時にScalarDBを通じてベクトルストアとメタデータDBに同時書き込みを行う。
- **ベクトルストアとメタデータDB**：FaissやMilvusなどのベクトルストアとRDBMS/NoSQLをScalarDBの下で統合し、ベクトルデータとドキュメントメタデータを管理する。ベクトル検索はScalarDB経由で実行し、結果とメタデータはトランザクション内で取得。
- **検索・AIアプリケーション**：ユーザーインタフェースやチャットボットがScalarDBのAPIを介して検索を行い、LLMはMCPサーバー経由でベクトル検索結果と関連情報を取得。ABACがユーザー属性に応じたアクセス権を適用する。
- **監査・分析基盤**：ScalarDBとScalarDLを用いて検索ログや更新履歴を保存し、どのドキュメントがどの質問に使われたかを可視化。分析に基づきベクトルストアのチューニングやテンプレート化を行う。

## 導入メリット／ROI

- 文書探索と知識検索の時間を大幅に短縮し、技術者や営業担当の生産性を向上させることで、研究開発投資の収益率を改善。
- 最新の文書や知見がベクトルストアとDBに即時反映され、AIチャットボットやRAGアプリケーションの回答精度が向上する。
- ABACによる厳格なアクセス制御とScalarDLによる証跡管理により、機密情報の漏洩や不正利用を防ぎつつ、AI基盤の利用を推進できる。

## 類似事例・参考資料

- 自動車部品メーカーや電子機器メーカーが、設計・品質文書を横断的に検索するRAG基盤を導入し、技術者向けチャットボットを構築した例がある。ScalarDBでベクトルストアとの整合性を保ちながらデータを更新することで、AI導入がスムーズに進んだと報告されている。
- ScalarDB公式資料では、異種データベースとVector Storeの連携やABAC機能を組み合わせてRAGを実現する方法が解説されている（参考: [scalar-labs.com](https://scalar-labs.com), [scalardb.scalar-labs.com](https://scalardb.scalar-labs.com)）。
