# DB-10 ERPアプリのサイド・バイ・サイド開発（補助簿）

## 概要

ERP導入企業では、標準機能に無い業務要件をアドオン開発で補っているが、ERP本体に直接アドオンを実装するとアップグレード時の改修コストが膨大になる。そのため近年では補助簿を外部アプリとして構築する「サイド・バイ・サイド」戦略が注目されている。ここでは、ERPと外部アプリのデータ整合性を保ちながら補助機能を構築する。

SAP S/4HANAやOracle Fusion CloudなどのERPは、20年以上に渡り企業の基幹業務を支えてきたが、カスタマイズ過多によるレガシー化、トランザクション中心設計による新要求への不適合、データモデルの厳格さによるAI開発との相性の悪さなど、構造的な課題が顕在化している。本ユースケースでは、ScalarDBを用いてERP本体を汚さずに企業の業務進化とAI化を実現する"外側の基幹システム"を構築する戦略を提供する。

## SAP/Oracle ERPに共通する「構造的な課題」

ERP（特にSAP S/4HANA・Oracle Fusion Cloud）は20年以上に渡り企業の基幹業務を支えてきました。しかし、アーキテクチャと運用面で以下の構造的課題が顕在化しています。

### (1) カスタマイズ過多 → ERP本体が「レガシー化する」

- 大企業ではERP導入時に **アドオン開発（Zプログラム、Extension、Custom Objects）** が膨張
- 導入から10年経つ頃には、「どれが標準でどれが拡張なのか分からない」状態
- 結果として
  - バージョンアップが進まない
  - 移行プロジェクトが巨大化・高コスト化
  - 変更管理が困難

➡ **ERPが業務進化のボトルネックになる**

### (2) ERPは「トランザクション中心」→ 企業の新しい要求に合わない

ERPの本質は **"勘定系の帳票を正しく作るためのシステム"** であり、以下が苦手：

- 非構造データ（画像・センサ・ログ）の処理
- AIワークロード
- 高速な要求（リアルタイム在庫、即日締め）
- 部門横断のアプリ連携（APIが弱い）
- ML Ops/ワークフローなど、モダンアプリケーションの要件

➡ **ERPの外での拡張が必要になる**

### (3) ERPのデータモデルは「厳格すぎる」

SAP/Oracleのデータは

- 正規化されすぎている
- テーブル数が多すぎる
- 変更が困難
- ABAP/Oracle APEXなど特定の技術依存

→ ChatGPTやClaudeのような **AI生成コードと相性が悪い**

AIが生成したコードをERP内で動かすと

- 参照すべきマスタが違う
- 認証・権限・BAPI/ODATAの扱いが複雑
- ロジックを汎用化しづらい

結果、**ERP内部でのAI開発は破綻しやすい**。

### (4) ERPクラウド移行（S/4HANA/Oracle Cloud ERP）での典型的な失敗

多くの大企業で以下の問題が発生：

1. **アドオン肥大で移行コストが爆発**
2. **既存ERPと新クラウドERPのデータが同期できない**
3. **サプライチェーンなどリアルタイム処理が間に合わない**
4. **外部SaaSとの連携でデータ不整合が多発**
5. **カスタマイズできない領域が増えて業務が"ERPに合わせられない"**

➡ ERP移行が **5〜7年かかり、数百億円になる** ことも珍しくない。

### (5) 近年の新しい問題：AI時代のERP開発は"構造的に破綻"

AIツール（Copilot、ChatGPT Code Interpreterなど）により

- "業務ごとに小さなアプリを高速開発"
- "社員が自分でAppを作る市民開発"

は加速した。しかしERP内部でそれをやると：

#### 追加開発が爆発（導入当初の3〜5倍）

→ Salesforce の「大企業がアドオンで自己崩壊」事例と同じ

#### 変更管理の地獄

ABAP拡張・BAPI連携・権限マトリクス更新・FI/CO影響調査…

#### データ整合性の担保が不可能

AIが生成したロジックが会計と齟齬を起こす

➡ **ERP内でのAI拡張は根本的に危険**
　（SAP/Oracleは"ERP内で作らず外側で作れ"と公式に方向転換）

## なぜ「サイド・バイ・サイド開発」が世界標準化したのか

SAP BTP・Oracle Integration Cloud・Workato 等のように**ERP外側に"補助簿（Side Ledger）や補助アプリ"を作るアーキテクチャ**が急速に普及。

### (1) ERP本体を「会計基盤」に閉じ込めて守るため

ERP本体は

- 壊してはいけない
- バージョンアップ阻害要因を排除

そのため、**アドオンは外に出すべし** が世界標準に。

### (2) 新機能は ERPの外で "素早く安全に" 作れる

Side-by-sideでは

- Node.js / Java / Python / Go など自由
- AI/MLワークロードも自由
- モダン開発が可能

ERPが得意な領域：会計・統制
Side appが得意な領域：ユーザ体験、AI、データ連携

### (3) 補助簿方式により「ERP移行が楽になる」

ERPの外に

- 共通マスタ
- ワークフロー
- ロギング
- 分析ロジック
- サプライチェーンの複雑業務

を逃がすことで**ERP本体は"薄い会計コア"だけ残す理想形になる**

→ SAPも"Clean Core"と公式に呼んでいる。

## 「DB-10 ERPサイド・バイ・サイド開発（補助簿）」で解決できること

### (1) 補助簿（補助トランザクション）をERP外側で一貫して管理

ERPに入る前の以下の情報を保持する：

- ドメイン固有の伝票（工程、船舶、保全、サプライヤ評価）
- AI生成ワークフロー
- 訂正履歴
- 監査ログ
- 分析用の拡張属性

ERP本体には **最終確定のジャーナルだけ** 流せば良い。

➡ ERPを汚さない
➡ 拡張データは外に蓄積
➡ Side ledger が企業の"コアデータプラットフォーム"化

### (2) マルチDB・マイクロサービス間の一貫データ整合性

SAP／Oracleの弱点は

- DBが一枚岩で拡張困難
- 外部アプリ連携時の二重書き込み

ScalarDBは

- MySQL / Postgres / Aurora / DynamoDB / CosmosDB を一貫トランザクションで束ねる
- どこに保存しても整合性が壊れない
- ERPの外の複雑業務を"正しい取引"として扱える

➡ Side-by-side環境が「本物の基幹システム」になる

### (3) AIによる補助業務アプリ開発が安全に可能

AIが勝手に作ったアプリでも

- ScalarDBを通す限りデータ不整合は起きない
- 補助簿側で審査・承認・ログが管理される
- ERP本体は汚れない

➡ AI駆動開発（AIDD）× ERPが衝突しない唯一の構造

### (4) ERP移行（S/4・Oracle Cloud）で **80%の開発を外出し** にできる

Side ledger 方式にすれば

- マスタ整備
- 分析
- サプライチェーンの処理
- 訂正・差分管理
- レガシー業務の補助アプリ

のほとんどをERP外に出せる。

→ ERP移行コストが劇的に下がる
→ 5年→2年に短縮
→ 追加アドオン0（Clean Core）

## AI時代に向けて「将来どうなるか」

### (1) ERPの役割は"財務統制"に集約される

SAPもOracleも

- AI
- アプリ高速開発
- マスタ管理
- データガバナンス

においてSaaS競争に負けており、ERPの守備範囲はどんどん縮小している。

今後のERPは

- 会計
- 税
- 統制（SOX、J-SOX）
- コンプライアンス

**のみを担うシステム**になる。

### (2) 企業の"本質的なコアシステム"は ERP外にできる

Side-by-side が

- ドメインデータ
- 分析
- ワークフロー
- AI/LLM
- 外部SaaS統合
- サプライチェーンの自動化

の"中核アプリケーション基盤"になる。

➡ ERPは外部プラットフォームの一機能になる

### (3) 将来の構造：ScalarDBを中心とした「真のコア基盤」

SAP / Oracle は"固い財務の箱"
Side ledger（ScalarDB）は"業務の真の中枢" という役割分担へ。

これが DB-10 の世界観です。

## ビジネス課題

- ERPのアップグレードやモジュール追加のたびにアドオンも改修が必要となり、開発保守コストが増大。
- 業務部門が要求する機能を迅速に提供できず、ERPの進化スピードに業務が追いつかない。
- サードパーティアドオンや外部SaaSとの連携でデータ整合性が失われるリスクがある。
- カスタマイズ過多によりERP本体がレガシー化し、バージョンアップや移行が困難になっている。
- AI時代の高速開発要求に対して、ERP内部での開発は構造的に破綻している。

## システム課題

- ERPが特定DBに依存しており、外部アプリとのデータ連携が難しい。
- ERPと外部アプリでデータが二重化し、同期処理やエラー検知が煩雑。
- ERP側のABAP等の専門技術者が不足しているため、アドオン開発の内製化が困難。
- ERPのデータモデルが厳格すぎて、AI生成コードやモダン開発手法と相性が悪い。
- マイクロサービス間のデータ整合性を担保する仕組みが不足している。

## 対象データ・環境

- 会計、購買、在庫、人事などERP標準機能に関連するデータ。
- 補助簿DB（例えばPostgreSQLやAzure SQL、MySQL、Aurora、DynamoDB、CosmosDBなど）。
- SAP S/4HANAやOracle Fusion Cloudなど主要ERPとAPI経由で連携する外部アプリ。
- AI生成アプリケーションやワークフロー、分析データ。
- サプライチェーンや部門横断の拡張データ。

## 導入目的・効果

### ERPのClean Core維持

- ERPの標準機能を変更せずに新機能を迅速に提供する。
- ERPのアップグレード影響を最小化し、アドオン保守コストを削減。
- Clean Coreを実現し、ERP移行を高速化（5年→2年に短縮）。

### AIによるアプリ拡張の安全性確保

- AIが生成したアプリケーションでもデータ整合性を担保できる。
- 補助簿側で審査・承認・ログを管理し、ERP本体を汚さない。
- AI駆動開発（AIDD）とERPが衝突しない構造を実現。

### 業務部門の自由度向上

- 業務部門が自由にテクノロジーを選択できる環境を整備する。
- モダンな開発言語（Node.js、Java、Python、Goなど）を使用可能。
- 非構造データやAIワークロードを柔軟に処理できる。

## 解決方法・ソリューション概要

ScalarDBを介してERP本体のDBと補助簿DBを連携し、分散トランザクションを実行する。外部アプリはScalarDBのAPIを利用して補助簿DBにデータを登録し、ERP側では必要な情報のみを参照する。また、ScalarDBが提供する認証・権限管理により、ERPと同等のセキュリティポリシーを適用できる。

### ScalarDBを用いたソリューションの最適構造

企業側のアプリケーション構造：

```
  ERP（SAP/Oracle）

        ↓ 最終仕訳のみ

-----------------------------------------

 サイド基盤（ScalarDB + 補助簿アプリ群）

-----------------------------------------

    │  マイクロサービス

    │  AI生成アプリ（AIDD）

    │  ワークフロー

    │  変更ログ / 監査証跡（ScalarDL）

    ↓

-----------------------------------------

 データ基盤（DWH／Lakehouse／分析）

-----------------------------------------
```

### 提供価値

- **ERPのClean Core維持**: アドオンを外に出すことで、ERP本体を薄い会計コアに保つ
- **AIによるアプリ拡張の安全性確保**: ScalarDBを通す限りデータ不整合が起きない
- **ERP移行（S/4／Oracle Cloud）を高速化**: 80%の開発を外出しにすることで移行コストが劇的に削減
- **マイクロサービスの整合性担保**: マルチDB間でACIDトランザクションを実現
- **サプライチェーンの補助データ管理**: 複雑な業務ロジックを補助簿で安全に管理
- **J-SOX / 内部統制を外側で強化**: 監査証跡や承認フローを補助簿側で管理

## システム構成

### ERPコネクタと補助簿アプリケーション

- ERP本体にアクセスする専用コネクタと外部補助簿アプリケーション
- ScalarDBは外部アプリとERP双方のDBに接続し、トランザクションを調整
- BPMやワークフローエンジンと組み合わせて、サイド・バイ・サイド開発の全体プロセスを可視化

### 補助簿データ管理

- ドメイン固有の伝票、AI生成ワークフロー、訂正履歴、監査ログ、分析用の拡張属性を補助簿で管理
- ERP本体には最終確定のジャーナルのみを送信
- マルチDB（MySQL / Postgres / Aurora / DynamoDB / CosmosDB）を一貫トランザクションで束ねる

### AI生成アプリケーション統合

- AIが生成したアプリケーションもScalarDB経由で安全にデータを扱える
- 補助簿側で審査・承認・ログ管理を実施
- ワークフローや変更履歴はScalarDLで証跡管理

## 導入メリット・ROI

### 生産性向上

- ERP本体への改修を最小限に抑え、補助機能を柔軟に開発できるため、保守コストを大幅削減
- AIによる高速開発とマイクロサービス化により、開発サイクルが短縮される

### 品質向上とリスク低減

- ERPのアップグレード時でも外部アプリを継続利用でき、ダウンタイムを削減
- ScalarDBがデータ整合性を自動で担保するため、補償処理の実装が不要

### 投資対効果の可視化

- ERP移行コストが劇的に削減（5年→2年、コストも大幅削減）
- 将来的なクラウド移行やERP乗り換え時にも補助アプリを再利用できるため、投資を保護

### 柔軟なスケーラビリティ

- 必要な部分のみをマイクロサービスとして拡張可能
- マルチDB対応により、最適なデータベースを選択できる

## CRM（Salesforce）で起きた「自己崩壊」問題への回答

**Salesforceはアドオン過多で"CRMを使わないCRM"になる事例が急増しています。**

ERPでも同じことが起きる：

- 権限モデルが複雑化
- オブジェクト乱立
- API負荷
- バージョンアップ失敗
- 内部統制不整合

➡ ERPも「外でやれ」が正解
➡ だから Side ledger が必須

ScalarDBを用いたサイド・バイ・サイド開発により、この問題を根本的に解決できる。

## 類似事例・参考資料

- 製造業や小売業がSAP S/4HANAのサイド・バイ・サイド戦略で補助簿を構築し、ScalarDBを用いてデータ整合性を確保した事例がある。
- 大企業がERPクラウド移行において、補助簿方式により移行期間を5年から2年に短縮し、コストを大幅に削減した事例がある。

## まとめ

**DB-10の本質**: ERPを拡張するのではなく、ERPを"補助簿で包み込む"ことで企業の基幹業務をモダンアーキテクチャへ安全に移行する構造。

DB-10とは：

> **ERP本体を汚さずに企業の業務進化とAI化を実現する"外側の基幹システム"を構築する戦略**

SAP/Oracleが抱える構造的課題（レガシー、移行難、AI適合不可）を根本的に解決するアプローチです。ERPの役割は"財務統制"に集約され、企業の"本質的なコアシステム"はScalarDBを中心としたSide ledgerに移行していく。これがAI時代におけるERPの未来像です。
